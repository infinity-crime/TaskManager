<Window x:Class="TaskManager.Views.TaskMainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TaskManager.Views"
        mc:Ignorable="d"
        Title="TaskMainWindow" Height="450" Width="800">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top: форма добавления новой задачи -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8" HorizontalAlignment="Left" VerticalAlignment="Top" >
            <TextBlock Text="Name:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox Width="120" Text="{Binding NewTaskName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,12,0"/>

            <TextBlock Text="Size (bytes):" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox Width="80" Text="{Binding NewTaskSize, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,12,0"/>

            <TextBlock Text="MaxStartTick:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox Width="60" Text="{Binding NewTaskMaxStart, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,12,0"/>

            <TextBlock Text="Duration (ticks):" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox Width="60" Text="{Binding NewTaskDuration, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,12,0"/>

            <Button Content="Add Task" Command="{Binding EnQueueCommand}" Width="90"/>
            <TextBlock Text="{Binding CurrentTick, StringFormat='Tick: {0}'}" Margin="20,0,0,0" VerticalAlignment="Center" FontWeight="Bold"/>
        </StackPanel>

        <!-- Bottom: четыре списка -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Queue -->
            <GroupBox Header="Queue" Grid.Column="0" Margin="4">
                <ListView ItemsSource="{Binding QueueTasks}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding TaskName}" Width="100"/>
                            <GridViewColumn Header="Size" DisplayMemberBinding="{Binding SizeBytes}" Width="70"/>
                            <GridViewColumn Header="MaxStart" DisplayMemberBinding="{Binding MaxStartTime}" Width="70"/>
                            <GridViewColumn Header="Duration" DisplayMemberBinding="{Binding RemainingDuration}" Width="70"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </GroupBox>

            <!-- Running -->
            <GroupBox Header="Running" Grid.Column="1" Margin="4">
                <ListView ItemsSource="{Binding RunningTasks}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding TaskName}" Width="100"/>
                            <GridViewColumn Header="Rem." DisplayMemberBinding="{Binding RemainingDuration}" Width="60"/>
                            <GridViewColumn Header="StartTick" DisplayMemberBinding="{Binding StartTick}" Width="70"/>
                            <GridViewColumn Header="Alloc.Offset" DisplayMemberBinding="{Binding AllocBlock.Offset}" Width="80"/>
                            <GridViewColumn Header="Alloc.Size" DisplayMemberBinding="{Binding AllocBlock.Size}" Width="80"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </GroupBox>

            <!-- Finished -->
            <GroupBox Header="Finished" Grid.Column="2" Margin="4">
                <ListView ItemsSource="{Binding FinishedTasks}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding TaskName}" Width="120"/>
                            <GridViewColumn Header="Duration" DisplayMemberBinding="{Binding RemainingDuration}" Width="80"/>
                            <GridViewColumn Header="StartTick" DisplayMemberBinding="{Binding StartTick}" Width="80"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </GroupBox>

            <!-- Timed out -->
            <GroupBox Header="Timed out" Grid.Column="3" Margin="4">
                <ListView ItemsSource="{Binding TimedOutTasks}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding TaskName}" Width="120"/>
                            <GridViewColumn Header="Size" DisplayMemberBinding="{Binding SizeBytes}" Width="70"/>
                            <GridViewColumn Header="MaxStart" DisplayMemberBinding="{Binding MaxStartTime}" Width="80"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </GroupBox>
        </Grid>
    </Grid>
</Window>
